# ğŸš€ ë‹¤ìŒ ì„¸ì…˜ ì‘ì—… ê°€ì´ë“œ

**ì‘ì„±ì¼:** 2025-12-31  
**í”„ë¡œì íŠ¸:** SHS_Product_DB - ë„¤ì´ë²„ ì¹´í˜ ìë™í™” ì‹œìŠ¤í…œ  
**ì§„í–‰ë¥ :** ê¸°ë³¸ ì‹œìŠ¤í…œ ì™„ì„± (85%), ëŒ“ê¸€ ì‹œìŠ¤í…œ êµ¬í˜„ í•„ìš” (15%)

---

## ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš”

### ê¸°ë³¸ ì •ë³´
- **ìœ„ì¹˜:** `C:\Users\ì„œí•˜ì„±\Desktop\í”„ë¡œê·¸ë¨\íŒŒì´ì¬\cs-system\SHS_Product_DB`
- **ì„œë²„:** https://scorp274.com (Render.com)
- **Git:** https://github.com/seehasung/SHS_Product_DB
- **8ëŒ€ PC:** Worker Agent ì‹¤í–‰ ì¤‘

### ê¸°ìˆ  ìŠ¤íƒ
- FastAPI + PostgreSQL
- Selenium + pyautogui + pyperclip
- WebSocket ì‹¤ì‹œê°„ í†µì‹ 
- VPN IP ìë™ ê°ì§€

---

## âœ… ì˜¤ëŠ˜(12/31) ì™„ì„±í•œ ê²ƒ

### 1. ë°ì´í„°ë² ì´ìŠ¤ (11ê°œ í…Œì´ë¸”)
```
AutomationWorkerPC, AutomationAccount, AutomationCafe
AutomationPrompt, AutomationSchedule, AutomationTask
AutomationPost, AutomationComment
CafeBoardMapping, CafeAccountLink, DraftPost
```

### 2. ë°±ì—”ë“œ API (routers/automation.py)
```
âœ… PC/ê³„ì •/ì¹´í˜/í”„ë¡¬í”„íŠ¸/ìŠ¤ì¼€ì¤„ ê´€ë¦¬
âœ… Task ìë™ ìƒì„± ë° í• ë‹¹
âœ… WebSocket ì‹¤ì‹œê°„ í†µì‹ 
âœ… í†µê³„ API
```

### 3. í”„ë¡ íŠ¸ì—”ë“œ (templates/automation_cafe_full.html)
```
âœ… 6ê°œ íƒ­ (ëŒ€ì‹œë³´ë“œ, PC, ê³„ì •, ì¹´í˜, í”„ë¡¬í”„íŠ¸, ìŠ¤ì¼€ì¤„)
âœ… ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
âœ… ëª¨ë‹¬ ê´€ë¦¬ ê¸°ëŠ¥
```

### 4. Worker Agent (worker_agent.py v1.0.1)
```
âœ… VPN IP ìë™ ê°ì§€
âœ… SSL ìš°íšŒ
âœ… í•œêµ­ ì‹œê°„
âœ… ìë™ ì—…ë°ì´íŠ¸
âœ… WebSocket ì•ˆì •ì„±
```

### 5. ë„¤ì´ë²„ ì¹´í˜ ê¸€ ìˆ˜ì • ë°œí–‰ ë¡œì§ **ì™„ì„±!** â­
```
âœ… cafe_poster_with_pyautogui.py (ì™„ë²½ ì‘ë™ í™•ì¸!)

ì‘ë™ ë°©ì‹:
1. ë¡œê·¸ì¸ (Enter ë°©ì‹)
2. ì‹ ê·œë°œí–‰ ê¸€ URL ì ‘ì†
3. iframe ì „í™˜ (cafe_main)
4. ìˆ˜ì • ë²„íŠ¼ í´ë¦­ â†’ ìƒˆ íƒ­
5. ì¹´í…Œê³ ë¦¬ ë³€ê²½
6. ì œëª© ì…ë ¥ (ê¸°ì¡´ ë‚´ìš© ì‚­ì œ)
7. ë³¸ë¬¸ ì…ë ¥ (JavaScript)
8. ì´ë¯¸ì§€ ì—…ë¡œë“œ (ì„œë²„â†’ë‹¤ìš´ë¡œë“œâ†’pyautogui)
9. íƒœê·¸ ì…ë ¥
10. ëŒ“ê¸€ í—ˆìš© ì²´í¬
11. ë“±ë¡
```

---

## ğŸ¯ ë‹¤ìŒ ì‘ì—…: ëŒ“ê¸€ ìˆœì°¨ ì‘ì„± ì‹œìŠ¤í…œ

### ìš”êµ¬ì‚¬í•­

#### ëŒ“ê¸€ ì›ê³  í˜•ì‹
```
ê·¸ë£¹-ìˆœì„œ: PCë²ˆí˜¸ "ë‚´ìš©"

ì˜ˆì‹œ:
1-1: PC1 "ë„ì™€ì£¼ì„¸ìš”ã… ã…œã… ã… ã… "
1-2: PC2 "ì €ë„ ê¶ê¸ˆí•˜ë„¤ìš”"
1-3: PC1 "ì˜¤ ëŒ€ë°•..."

2-1: PC3 "ë‹¤ë“¤ ê³ ë¯¼ì´..." (ìƒˆ ëŒ“ê¸€)
2-2: PC1 "ì™€ í— ëŒ€ë°•..." (2-1ì— ëŒ€í•œ ëŒ€ëŒ“ê¸€)
2-3: PC3 "ê°œì¸ ì±„íŒ…ì¤˜ë¼" (2-1ì— ëŒ€í•œ ëŒ€ëŒ“ê¸€)

3-1: PC4 "ì €ë„ ì‘ë…„ì—..." (ìƒˆ ëŒ“ê¸€)
3-2: PC2 "í˜¹ì‹œ ì–´ë–¤ê±°..." (3-1ì— ëŒ€í•œ ëŒ€ëŒ“ê¸€)
```

#### ì‘ë™ íë¦„
```
1. ë³¸ë¬¸ ê¸€ ì‘ì„± (PC1) â†’ URL íšë“
2. WebSocketìœ¼ë¡œ ë‹¤ë¥¸ PCë“¤ì—ê²Œ ì‹ í˜¸
3. ëŒ“ê¸€ Task ìƒì„± (ìˆœì„œëŒ€ë¡œ)
4. ìˆœì°¨ ì‹¤í–‰:
   - 1-1 ì™„ë£Œ â†’ 1-2 ì‹œì‘
   - 1-2 ì™„ë£Œ â†’ 1-3 ì‹œì‘
   - ...
5. ëŒ€ëŒ“ê¸€: ë¶€ëª¨ ëŒ“ê¸€ ì°¾ì•„ì„œ ë‹µê¸€
```

### í•„ìš”í•œ ì‘ì—…

#### 1. ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸
```sql
CREATE TABLE comment_scripts (
  id SERIAL PRIMARY KEY,
  post_task_id INTEGER,  -- ë³¸ë¬¸ Task ID
  group_number INTEGER,   -- ê·¸ë£¹ (1, 2, 3...)
  sequence_number INTEGER,  -- ìˆœì„œ (1, 2, 3...)
  pc_number INTEGER,      -- PC ë²ˆí˜¸
  content TEXT,           -- ëŒ“ê¸€ ë‚´ìš©
  is_new_comment BOOLEAN, -- ìƒˆ ëŒ“ê¸€ ì—¬ë¶€
  parent_group INTEGER    -- ëŒ€ëŒ“ê¸€ì´ë©´ ë¶€ëª¨ ê·¸ë£¹
);
```

#### 2. ëŒ“ê¸€ ì›ê³  íŒŒì‹±
```python
def parse_comment_script(text):
    """
    ì…ë ¥: "1-1: PC1 ë„ì™€ì£¼ì„¸ìš”"
    ì¶œë ¥: {
      group: 1,
      sequence: 1,
      pc: 1,
      content: "ë„ì™€ì£¼ì„¸ìš”",
      is_new: True
    }
    """
```

#### 3. WebSocket ì‹ í˜¸
```python
# ë³¸ë¬¸ ì™„ë£Œ ì‹œ
await manager.broadcast({
  'type': 'post_completed',
  'post_url': 'https://cafe.naver.com/xxx/12345',
  'task_id': 123
})

# ëŒ“ê¸€ ì™„ë£Œ ì‹œ
await manager.broadcast({
  'type': 'comment_completed',
  'group': 1,
  'sequence': 2
})
```

#### 4. ìˆœì°¨ ì‹¤í–‰ ë¡œì§
```python
# ì´ì „ ëŒ“ê¸€ ì™„ë£Œ ëŒ€ê¸°
while not is_previous_completed(group, sequence):
    await asyncio.sleep(1)

# í˜„ì¬ ëŒ“ê¸€ ì‹¤í–‰
await write_comment(...)
```

#### 5. ë„¤ì´ë²„ ì¹´í˜ ëŒ“ê¸€ ì‘ì„± (Selenium)
```python
# ê¸€ URL ì ‘ì†
driver.get(post_url)

# ëŒ“ê¸€ ì…ë ¥ì°½ ì°¾ê¸°
comment_input = driver.find_element(By.CSS_SELECTOR, 'textarea.comment_inbox')

# ëŒ“ê¸€ ì…ë ¥
human_type(comment_input, content)

# ë“±ë¡
submit_btn.click()
```

---

## ğŸ”‘ í•µì‹¬ ì„ íƒì (ë„¤ì´ë²„ ì¹´í˜)

### ê¸€ ìˆ˜ì •
```python
iframe: 'cafe_main'
ìˆ˜ì • ë²„íŠ¼: //a[.//span[text()="ìˆ˜ì •"]]
ì¹´í…Œê³ ë¦¬: div.FormSelectBox button
ì œëª©: textarea.textarea_input
ë³¸ë¬¸: article.se-components-wrap (JavaScript ì¡°ì‘)
ì‚¬ì§„: button.se-image-toolbar-button (pyautogui ì—…ë¡œë“œ)
íƒœê·¸: input.tag_input
ëŒ“ê¸€ í—ˆìš©: input#coment
ë“±ë¡: a.BaseButton--skinGreen
```

### ëŒ“ê¸€ ì‘ì„± (í™•ì¸ í•„ìš”!)
```python
ëŒ“ê¸€ ì…ë ¥ì°½: textarea.comment_inbox (?)
ëŒ€ëŒ“ê¸€ ë²„íŠ¼: (í™•ì¸ í•„ìš”)
ë“±ë¡ ë²„íŠ¼: (í™•ì¸ í•„ìš”)
```

---

## ğŸ“‚ ì¤‘ìš” íŒŒì¼ ìœ„ì¹˜

```
routers/automation.py (1000+ ë¼ì¸)
worker_agent.py (600+ ë¼ì¸)
templates/automation_cafe_full.html (1300+ ë¼ì¸)
database.py (11ê°œ ìë™í™” í…Œì´ë¸”)

í…ŒìŠ¤íŠ¸ ì™„ì„±:
cafe_poster_with_pyautogui.py (ì™„ë²½ ì‘ë™!)
```

---

## ğŸ”§ ê°œë°œ í™˜ê²½ ì„¤ì •

### í•„ìˆ˜ íŒ¨í‚¤ì§€
```bash
pip install selenium pyautogui pyperclip requests
```

### Render Shell ì ‘ì†
```
https://dashboard.render.com/ â†’ Shell íƒ­
cd /opt/render/project/src
python init_automation_data.py
```

---

## ğŸ¯ ë‹¤ìŒ ì„¸ì…˜ ì²« ì‘ì—…

**1ë‹¨ê³„: ëŒ“ê¸€ ì‘ì„± Selenium ë¡œì§ í…ŒìŠ¤íŠ¸**

```python
# test_naver_comment.py ìƒì„±
# ìˆ˜ë™ìœ¼ë¡œ ê¸€ URL ì ‘ì† â†’ ëŒ“ê¸€ ì…ë ¥ â†’ ë“±ë¡
# ì •í™•í•œ ì„ íƒì íŒŒì•…
```

**2ë‹¨ê³„: ëŒ€ëŒ“ê¸€ ì‘ì„± ë¡œì§**

```python
# ë¶€ëª¨ ëŒ“ê¸€ ì°¾ê¸°
# ë‹µê¸€ ë²„íŠ¼ í´ë¦­
# ëŒ€ëŒ“ê¸€ ì…ë ¥
```

**3ë‹¨ê³„: ìˆœì°¨ ì‹¤í–‰ ì‹œìŠ¤í…œ**

```python
# WebSocket ì‹ í˜¸ ê¸°ë°˜
# ì´ì „ ëŒ“ê¸€ ì™„ë£Œ í™•ì¸
# í˜„ì¬ ëŒ“ê¸€ ì‹¤í–‰
```

---

## ğŸ’¡ ì£¼ì˜ì‚¬í•­

1. **pyautogui ì‚¬ìš© ì‹œ:** íƒìƒ‰ê¸°ê°€ ì—´ë¦¬ëŠ” ë™ì•ˆ í‚¤ë³´ë“œ/ë§ˆìš°ìŠ¤ ê±´ë“œë¦¬ì§€ ë§ê²ƒ
2. **VPN í•„ìˆ˜:** ê° PCë§ˆë‹¤ ë‹¤ë¥¸ VPN ì„œë²„
3. **ìº¡ì± :** ìˆ˜ë™ í•´ê²° í•„ìš”
4. **ë´‡ ê°ì§€:** ëœë¤ ì§€ì—°, í•œ ê¸€ìì”© ì…ë ¥

---

## ğŸ“ ë¬¸ì˜/ë””ë²„ê¹…

**ì„œë²„ ë¡œê·¸ í™•ì¸:**
```
Render.com â†’ Logs íƒ­
```

**Worker ì½˜ì†”:**
```
ì‘ì—… PCì—ì„œ Worker Agent ì°½ í™•ì¸
```

**í…ŒìŠ¤íŠ¸:**
```
python cafe_poster_with_pyautogui.py
```

---

**ì´ íŒŒì¼ì„ ë‹¤ìŒ ì„¸ì…˜ ì‹œì‘ ì‹œ ì½ì–´ì£¼ì„¸ìš”!** ğŸ“–

ëª¨ë“  contextê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤!



